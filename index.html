<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="background-decoration"></div>
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-icon">
                    <i class="fas fa-wallet"></i>
                </div>
                <h1>Expense Tracker</h1>
                <p class="header-subtitle">Track your daily expenses with ease</p>
            </div>
        </header>

        <!-- Expense Entry Section -->
        <section class="expense-entry">
            <h2><i class="fas fa-plus-circle"></i> Add Expense</h2>
            <form id="expenseForm">
                <div class="form-group">
                    <label for="expenseDate"><i class="fas fa-calendar-alt"></i> Date:</label>
                    <input type="date" id="expenseDate" required>
                </div>
                <div class="form-group">
                    <label for="expenseAmount"><i class="fas fa-rupee-sign"></i> Amount:</label>
                    <input type="number" id="expenseAmount" step="0.01" min="0" placeholder="0.00" required>
                </div>
                <div class="form-group">
                    <label for="expenseItem"><i class="fas fa-shopping-bag"></i> Item:</label>
                    <select id="expenseItem" required>
                        <option value="">Select an item</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="expenseCategory"><i class="fas fa-tags"></i> Category:</label>
                    <input type="text" id="expenseCategory" readonly>
                </div>
                <div class="form-group">
                    <label for="expenseNote"><i class="fas fa-sticky-note"></i> Note (optional):</label>
                    <input type="text" id="expenseNote" placeholder="Add a short note (e.g., Lunch with friends)">
                </div>
                <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Add Expense</button>
            </form>
        </section>

        <!-- Expense Overview Chart Section -->
        <section class="overview-section">
            <h2><i class="fas fa-chart-line"></i> Expense Overview</h2>
            <div class="chart-container">
                <canvas id="overviewChart"></canvas>
            </div>
        </section>

        <!-- Quick Actions Section -->
        <section class="quick-actions-section">
            <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
            <div class="management-buttons">
                <button id="openExpenseListBtn" class="btn btn-primary">
                    <i class="fas fa-list"></i> View Expense List
                </button>
                <button id="openReportBtn" class="btn btn-primary">
                    <i class="fas fa-chart-pie"></i> Expenses Report
                </button>
            </div>
        </section>

        <!-- Category Management Section -->
        <section class="category-management">
            <h2><i class="fas fa-cog"></i> Settings</h2>
            <div class="management-buttons">
                <button id="openCategoryManagementBtn" class="btn btn-primary">
                    <i class="fas fa-tags"></i> Manage Categories
                </button>
                <button id="openItemMappingBtn" class="btn btn-primary">
                    <i class="fas fa-link"></i> Manage Item-Category Mapping
                </button>
            </div>
        </section>
    </div>

    <!-- Modal for Category Details -->
    <div id="categoryModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2 id="modalTitle"></h2>
            <div class="modal-chart-container">
                <canvas id="categoryDetailChart"></canvas>
            </div>
            <div id="modalBody"></div>
        </div>
    </div>

    <!-- Modal for Category Management -->
    <div id="categoryManagementModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close">&times;</span>
            <h2><i class="fas fa-tags"></i> Category Management</h2>
            <div class="modal-section">
                <h3><i class="fas fa-plus-circle"></i> Add New Category</h3>
                <div class="category-controls">
                    <div class="form-group">
                        <input type="text" id="newCategoryName" placeholder="Category name">
                        <button id="addCategoryBtn" class="btn btn-primary"><i class="fas fa-plus"></i> Add Category</button>
                    </div>
                </div>
            </div>
            <div class="modal-section">
                <h3><i class="fas fa-list"></i> Existing Categories</h3>
                <div id="categoriesList" class="categories-list"></div>
            </div>
            <div class="modal-actions">
                <button id="saveCategoriesBtn" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                <button id="closeCategoryModalBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Item-Category Mapping -->
    <div id="itemMappingModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close">&times;</span>
            <h2><i class="fas fa-link"></i> Item-Category Mapping</h2>
            <div class="modal-section">
                <h3><i class="fas fa-plus-circle"></i> Add New Item</h3>
                <div class="item-mapping-controls">
                    <div class="form-group">
                        <input type="text" id="newItemName" placeholder="Item name">
                        <select id="newItemCategory">
                            <option value="">Select category</option>
                        </select>
                        <button id="addItemBtn" class="btn btn-primary"><i class="fas fa-plus"></i> Add Item</button>
                    </div>
                </div>
            </div>
            <div class="modal-section">
                <h3><i class="fas fa-list"></i> Item Mappings</h3>
                <div id="itemsList" class="items-list"></div>
            </div>
            <div class="modal-actions">
                <button id="saveMappingsBtn" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                <button id="closeMappingModalBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Edit Category -->
    <div id="editCategoryModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2><i class="fas fa-edit"></i> Edit Category</h2>
            <div class="form-group">
                <label for="editCategoryName"><i class="fas fa-tag"></i> Category Name:</label>
                <input type="text" id="editCategoryName">
                <input type="hidden" id="editCategoryId">
            </div>
            <button id="saveCategoryBtn" class="btn btn-primary"><i class="fas fa-save"></i> Save</button>
        </div>
    </div>

    <!-- Modal for Expense List -->
    <div id="expenseListModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close">&times;</span>
            <h2><i class="fas fa-list"></i> Expense List</h2>
            <div class="modal-section">
                <div class="expense-list-controls">
                    <div class="form-group">
                        <label for="expenseListMonth"><i class="fas fa-calendar"></i> Filter by Month:</label>
                        <input type="month" id="expenseListMonth">
                    </div>
                    <button id="loadExpensesBtn" class="btn btn-secondary"><i class="fas fa-search"></i> Load Expenses</button>
                </div>
            </div>
            <div class="modal-section">
                <div id="expensesList" class="expenses-list"></div>
            </div>
            <div class="modal-actions">
                <button id="closeExpenseListModalBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Expenses Report -->
    <div id="monthlyReportModal" class="modal">
        <div class="modal-content large-modal">
            <span class="close">&times;</span>
            <h2><i class="fas fa-chart-pie"></i> Expenses Report</h2>
            <div class="modal-section">
                <div class="report-controls">
                    <div class="form-group">
                        <label for="reportRangeType"><i class="fas fa-filter"></i> Range:</label>
                        <select id="reportRangeType">
                            <option value="monthly" selected>Monthly</option>
                            <option value="weekly">Weekly</option>
                            <option value="yearly">Yearly</option>
                            <option value="custom">Custom Range</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="reportMonth"><i class="fas fa-calendar"></i> Month:</label>
                        <input type="month" id="reportMonth" required>
                    </div>
                    <div class="form-group">
                        <label for="reportWeek"><i class="fas fa-calendar-week"></i> Week:</label>
                        <input type="week" id="reportWeek">
                    </div>
                    <div class="form-group">
                        <label for="reportYear"><i class="fas fa-calendar-alt"></i> Year:</label>
                        <input type="number" id="reportYear" min="1970" max="2100" placeholder="YYYY">
                    </div>
                    <div class="form-group">
                        <label for="reportStartDate"><i class="fas fa-play"></i> Start Date:</label>
                        <input type="date" id="reportStartDate">
                    </div>
                    <div class="form-group">
                        <label for="reportEndDate"><i class="fas fa-stop"></i> End Date:</label>
                        <input type="date" id="reportEndDate">
                    </div>
                    <button id="generateReport" class="btn btn-secondary"><i class="fas fa-search"></i> Generate Report</button>
                </div>
            </div>
            <div class="modal-section">
                <div class="report-charts">
                    <div class="chart-wrapper">
                        <h3><i class="fas fa-chart-pie"></i> Category Distribution</h3>
                        <canvas id="monthlyPieChart"></canvas>
                    </div>
                    <div class="chart-wrapper">
                        <h3><i class="fas fa-chart-bar"></i> Category Comparison</h3>
                        <canvas id="monthlyBarChart"></canvas>
                    </div>
                </div>
                <div id="reportSummary" class="report-summary"></div>
            </div>
            <div class="modal-actions">
                <button id="closeMonthlyReportModalBtn" class="btn btn-secondary">Close</button>
            </div>
        </div>
    </div>

    <!-- Modal for Edit Expense -->
    <div id="editExpenseModal" class="modal">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2><i class="fas fa-edit"></i> Edit Expense</h2>
            <form id="editExpenseForm">
                <div class="form-group">
                    <label for="editExpenseDate"><i class="fas fa-calendar-alt"></i> Date:</label>
                    <input type="date" id="editExpenseDate" required>
                </div>
                <div class="form-group">
                    <label for="editExpenseAmount"><i class="fas fa-rupee-sign"></i> Amount:</label>
                    <input type="number" id="editExpenseAmount" step="0.01" min="0" placeholder="0.00" required>
                </div>
                <div class="form-group">
                    <label for="editExpenseItem"><i class="fas fa-shopping-bag"></i> Item:</label>
                    <select id="editExpenseItem" required>
                        <option value="">Select an item</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editExpenseCategory"><i class="fas fa-tags"></i> Category:</label>
                    <input type="text" id="editExpenseCategory" readonly>
                </div>
                <div class="form-group">
                    <label for="editExpenseNote"><i class="fas fa-sticky-note"></i> Note (optional):</label>
                    <input type="text" id="editExpenseNote" placeholder="Add a short note">
                </div>
                <input type="hidden" id="editExpenseId">
                <div class="modal-actions">
                    <button type="submit" class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
                    <button type="button" id="cancelEditExpenseBtn" class="btn btn-secondary">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
